# 데이터 랭글링

`데이터 랭글링`이란 한 형태의 데이터를 다른 형태로 변환하는 것이다. 이러한 행위는 많은 순간들에 이루어진다. 예를 들면 다음과 같다.
 - 이미지의 포맷 변환
 - 로그 데이터 가공 -> 그래프, 통계
 - 파이프 연산자를 통해 한 프로그램의 결과를 다른 프로그램의 입력으로 넣는 것

데이터 랭글링을 하기 위해서는 처리할 데이터 소스가 필요하다.

ssh 로그를 이용한 grep 사용 예시  
~중략

여기서 사용할 도구는 `sed`라는 것이다. 이 sed는 스트림 에디터로, 예전에 있었던, 아무도 쓰고 싶지 않을 정도로 아주 특이한 에디터인 `ed`의 개량형이다. `sed`는 컨텐츠 스트림의 변화를 줄 수 있다. sed로 할 수 있는 가장 간단한 동작 중 하나는 주어진 입력 스트림을 치환하는 것이다.

다음과 같은 `syslog`가 있다.

```console
ben@HOMEPC:/var/log$ cat syslog
Jun 10 23:53:16 HOMEPC rsyslogd: set SO_TIMESTAMP failed on '/dev/log': Invalid argument [v8.32.0]
Jun 10 23:53:16 HOMEPC rsyslogd: imklog: cannot open kernel log (/proc/kmsg): No such file or directory.
Jun 10 23:53:16 HOMEPC rsyslogd: activation of module imklog failed [v8.32.0 try http://www.rsyslog.com/e/2145 ]
Jun 10 23:53:16 HOMEPC rsyslogd: rsyslogd's groupid changed to 106
Jun 10 23:53:16 HOMEPC rsyslogd: rsyslogd's userid changed to 102
Jun 10 23:53:16 HOMEPC rsyslogd:  [origin software="rsyslogd" swVersion="8.32.0" x-pid="89" x-info="http://www.rsyslog.com"] start
```

여기서 `rsyslogd`가 있는 라인만 검색하기 위해서는 다음과 같이 처리할 수 있다.

```console
ben@HOMEPC:/var/log$ cat syslog | grep rsyslog
Jun 10 23:53:16 HOMEPC rsyslogd: set SO_TIMESTAMP failed on '/dev/log': Invalid argument [v8.32.0]
Jun 10 23:53:16 HOMEPC rsyslogd: imklog: cannot open kernel log (/proc/kmsg): No such file or directory.
Jun 10 23:53:16 HOMEPC rsyslogd: activation of module imklog failed [v8.32.0 try http://www.rsyslog.com/e/2145 ]
Jun 10 23:53:16 HOMEPC rsyslogd: rsyslogd's groupid changed to 106
Jun 10 23:53:16 HOMEPC rsyslogd: rsyslogd's userid changed to 102
Jun 10 23:53:16 HOMEPC rsyslogd:  [origin software="rsyslogd" swVersion="8.32.0" x-pid="89" x-info="http://www.rsyslog.com"] start
```

여기서 `rsyslogd`를 포함한 이전 문자열들을 지우기 위해서 sed 에 다음과 같이 처리할 수 있다.

```console
ben@HOMEPC:/var/log$ cat syslog | grep rsyslog | sed "s/.*rsyslogd//"
: set SO_TIMESTAMP failed on '/dev/log': Invalid argument [v8.32.0]
: imklog: cannot open kernel log (/proc/kmsg): No such file or directory.
: activation of module imklog failed [v8.32.0 try http://www.rsyslog.com/e/2145 ]
's groupid changed to 106
's userid changed to 102
" swVersion="8.32.0" x-pid="89" x-info="http://www.rsyslog.com"] start
```